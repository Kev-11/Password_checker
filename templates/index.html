<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureCheck | Password Breach Scanner</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- Vercel Web Analytics -->
    <script>
      window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>
<body>
    <!-- Matrix Background Effect -->
    <canvas id="matrix-bg"></canvas>
    
    <!-- Auth Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content terminal-window">
            <div class="terminal-header">
                <span class="terminal-title">‚îå‚îÄ‚îÄ[AUTHENTICATION]</span>
            </div>
            <div class="terminal-body">
                <div id="login-form" class="auth-form">
                    <h2 class="cyber-text">‚îî‚îÄ# ACCESS CONTROL</h2>
                    <div class="input-group">
                        <span class="prompt">root@securecheck:~$</span>
                        <input type="email" id="login-email" placeholder="EMAIL_ADDRESS" class="cyber-input">
                    </div>
                    <div class="input-group">
                        <span class="prompt">root@securecheck:~$</span>
                        <input type="password" id="login-password" placeholder="PASSWORD" class="cyber-input">
                    </div>
                    <div class="remember-me-group">
                        <label class="remember-me-label">
                            <input type="checkbox" id="remember-me" class="remember-checkbox">
                            <span class="remember-text">Remember me</span>
                        </label>
                    </div>
                    <button onclick="login()" class="cyber-btn glow-btn">
                        <span class="btn-text">[ AUTHENTICATE ]</span>
                    </button>
                    <div class="divider">
                        <span class="divider-text">OR</span>
                    </div>
                    <button onclick="googleSignIn()" class="google-btn">
                        <span class="google-icon">üîê</span>
                        <span class="btn-text">SIGN IN WITH GOOGLE</span>
                    </button>
                    <p class="switch-auth">
                        <span class="dim-text">New operator?</span>
                        <a href="#" onclick="showSignup()">Register Access</a>
                    </p>
                </div>
                
                <div id="signup-form" class="auth-form" style="display: none;">
                    <h2 class="cyber-text">‚îî‚îÄ# USER REGISTRATION</h2>
                    <div class="input-group">
                        <span class="prompt">root@securecheck:~$</span>
                        <input type="email" id="signup-email" placeholder="EMAIL_ADDRESS" class="cyber-input">
                    </div>
                    <div class="input-group">
                        <span class="prompt">root@securecheck:~$</span>
                        <input type="password" id="signup-password" placeholder="PASSWORD" class="cyber-input" oninput="checkSignupPasswordStrength()">
                    </div>
                    
                    <!-- Password Strength Meter for Signup -->
                    <div id="signup-strength-meter" class="strength-meter" style="display: none;">
                        <div class="strength-bar-container">
                            <div id="signup-strength-bar" class="strength-bar"></div>
                        </div>
                        <div class="strength-info">
                            <span id="signup-strength-label" class="strength-label">WEAK</span>
                            <span id="signup-strength-percent" class="strength-percent">0%</span>
                        </div>
                        <div id="signup-strength-suggestions" class="strength-suggestions"></div>
                    </div>
                    
                    <div class="input-group">
                        <span class="prompt">root@securecheck:~$</span>
                        <input type="password" id="signup-confirm" placeholder="CONFIRM_PASSWORD" class="cyber-input">
                    </div>
                    <button onclick="signup()" class="cyber-btn glow-btn">
                        <span class="btn-text">[ REGISTER ]</span>
                    </button>
                    <div class="divider">
                        <span class="divider-text">OR</span>
                    </div>
                    <button onclick="googleSignIn()" class="google-btn">
                        <span class="google-icon">üîê</span>
                        <span class="btn-text">SIGN UP WITH GOOGLE</span>
                    </button>
                    <p class="switch-auth">
                        <span class="dim-text">Already registered?</span>
                        <a href="#" onclick="showLogin()">Login</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div id="app-container" style="display: none;">
        <!-- Header -->
        <header class="main-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-cube">
                        <div class="cube-face front">üîí</div>
                        <div class="cube-face back">üîì</div>
                        <div class="cube-face left">‚ö†Ô∏è</div>
                        <div class="cube-face right">‚úì</div>
                        <div class="cube-face top">üõ°Ô∏è</div>
                        <div class="cube-face bottom">üîê</div>
                    </div>
                    <h1 class="site-title">
                        <span class="title-line">SecureCheck</span>
                        <span class="subtitle">PASSWORD_BREACH_SCANNER_V2.0</span>
                    </h1>
                </div>
                <div class="user-section">
                    <div class="theme-selector">
                        <button onclick="toggleThemeMenu()" class="theme-btn" title="Change Theme">
                            <span>üé®</span>
                        </button>
                        <div id="theme-menu" class="theme-menu" style="display: none;">
                            <button onclick="changeTheme('green')" class="theme-option theme-green">Matrix Green</button>
                            <button onclick="changeTheme('blue')" class="theme-option theme-blue">Cyber Blue</button>
                            <button onclick="changeTheme('purple')" class="theme-option theme-purple">Neon Purple</button>
                            <button onclick="changeTheme('red')" class="theme-option theme-red">Hacker Red</button>
                            <button onclick="changeTheme('orange')" class="theme-option theme-orange">Amber Alert</button>
                        </div>
                    </div>
                    <span id="user-email" class="user-info">user@system</span>
                    <button onclick="deleteAccount()" class="delete-btn">[ DELETE ACCOUNT ]</button>
                    <button onclick="logout()" class="logout-btn">[ DISCONNECT ]</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="grid-container">
                <!-- Password Checker Section -->
                <section class="terminal-window scanner-section">
                    <div class="terminal-header">
                        <span class="terminal-title">‚îå‚îÄ‚îÄ[PASSWORD_SCANNER]</span>
                        <div class="header-indicators">
                            <span class="indicator red"></span>
                            <span class="indicator yellow"></span>
                            <span class="indicator green"></span>
                        </div>
                    </div>
                    <div class="terminal-body">
                        <div class="scanner-content">
                            <p class="terminal-prompt">root@securecheck:~$ initiate_breach_scan</p>
                            <div class="scan-interface">
                                <div class="input-wrapper">
                                    <span class="input-prefix">&gt;&gt;</span>
                                    <input 
                                        type="password" 
                                        id="password-input" 
                                        placeholder="ENTER_PASSWORD_TO_SCAN"
                                        class="password-input"
                                    >
                                    <button id="toggle-visibility" class="visibility-toggle" onclick="togglePasswordVisibility()">
                                        üëÅÔ∏è
                                    </button>
                                </div>
                                <button onclick="checkPassword()" class="scan-btn">
                                    <span class="btn-icon">üîç</span>
                                    <span class="btn-text">EXECUTE SCAN</span>
                                </button>
                            </div>
                            
                            <!-- Result Display -->
                            <div id="result-container" class="result-container" style="display: none;">
                                <div id="result-content" class="result-content"></div>
                            </div>
                            
                            <!-- Loading Animation -->
                            <div id="loading" class="loading" style="display: none;">
                                <div class="loader">
                                    <div class="scan-line"></div>
                                </div>
                                <p class="loading-text">SCANNING DATABASE...</p>
                            </div>
                            
                            <!-- Security Information Section -->
                            <div class="security-info-section">
                                <div class="info-main">
                                    <h3 class="info-title">Why check for pwned passwords?</h3>
                                    <p class="info-description">
                                        Password reuse is extremely common and puts your accounts at risk. When credentials are exposed in data breaches, attackers can use these known email and password combinations to access your other accounts.
                                    </p>
                                    <p class="info-highlight">
                                        <a href="https://pages.nist.gov/800-63-3/sp800-63b.html" target="_blank" rel="noopener noreferrer" class="nist-link">NIST guidelines specifically recommend</a> checking user passwords against previously breached datasets. This service provides a simple, secure way to comply with these guidelines.
                                    </p>
                                </div>
                                
                                <div class="info-dangers">
                                    <h3 class="info-title">The dangers of password reuse</h3>
                                    
                                    <div class="danger-cards">
                                        <div class="danger-card">
                                            <div class="danger-icon">üõ°Ô∏è</div>
                                            <h4 class="danger-title">Credential Stuffing</h4>
                                            <p class="danger-description">
                                                Attackers automate login attempts using leaked credentials from other sites, exploiting password reuse habits.
                                            </p>
                                        </div>
                                        
                                        <div class="danger-card">
                                            <div class="danger-icon">üóÑÔ∏è</div>
                                            <h4 class="danger-title">Data Breaches</h4>
                                            <p class="danger-description">
                                                Large-scale breaches expose millions of passwords, which are often used across multiple services.
                                            </p>
                                        </div>
                                        
                                        <div class="danger-card">
                                            <div class="danger-icon">üîë</div>
                                            <h4 class="danger-title">Password Patterns</h4>
                                            <p class="danger-description">
                                                Even when users modify passwords between sites, attackers can easily predict common patterns.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Password Strength Analyzer Section -->
                <section class="terminal-window strength-section">
                    <div class="terminal-header">
                        <span class="terminal-title">‚îå‚îÄ‚îÄ[PASSWORD_STRENGTH_ANALYZER]</span>
                        <div class="header-indicators">
                            <span class="indicator red"></span>
                            <span class="indicator yellow"></span>
                            <span class="indicator green"></span>
                        </div>
                    </div>
                    <div class="terminal-body">
                        <div class="strength-analyzer-content">
                            <p class="terminal-prompt">root@securecheck:~$ analyze_password_strength</p>
                            
                            <div class="analyzer-interface">
                                <div class="input-wrapper">
                                    <span class="input-prefix">&gt;&gt;</span>
                                    <input 
                                        type="password" 
                                        id="strength-password-input" 
                                        placeholder="ENTER_PASSWORD_TO_ANALYZE"
                                        class="password-input"
                                        oninput="analyzePasswordStrength()"
                                    >
                                    <button id="strength-toggle-visibility" class="visibility-toggle" onclick="toggleStrengthPasswordVisibility()">
                                        üëÅÔ∏è
                                    </button>
                                </div>
                                <button onclick="analyzeAndSave()" class="scan-btn">
                                    <span class="btn-icon">üìä</span>
                                    <span class="btn-text">ANALYZE & SAVE</span>
                                </button>
                            </div>
                            
                            <!-- Strength Analysis Display -->
                            <div id="strength-analysis" class="strength-analysis" style="display: none;">
                                <!-- Strength Meter -->
                                <div class="strength-meter-main">
                                    <div class="meter-header">
                                        <span class="meter-title">[STRENGTH ANALYSIS]</span>
                                        <span id="strength-score-display" class="strength-score">0%</span>
                                    </div>
                                    <div class="strength-bar-container-main">
                                        <div id="strength-bar-main" class="strength-bar-main"></div>
                                    </div>
                                    <div class="strength-level-display">
                                        <span id="strength-level-main" class="strength-level">VERY WEAK</span>
                                        <span id="crack-time-display" class="crack-time">Crack time: Instant</span>
                                    </div>
                                </div>
                                
                                <!-- Criteria Checklist -->
                                <div class="criteria-checklist">
                                    <div class="criteria-title">&gt;&gt; Requirements:</div>
                                    <div id="criteria-list" class="criteria-items"></div>
                                </div>
                                
                                <!-- Suggestions -->
                                <div id="strength-suggestions-main" class="suggestions-panel">
                                    <div class="suggestions-title">&gt;&gt; Suggestions:</div>
                                    <div id="suggestions-list" class="suggestions-items"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Password Generator Section -->
                <section class="terminal-window generator-section">
                    <div class="terminal-header">
                        <span class="terminal-title">‚îå‚îÄ‚îÄ[PASSWORD_GENERATOR]</span>
                        <div class="header-indicators">
                            <span class="indicator red"></span>
                            <span class="indicator yellow"></span>
                            <span class="indicator green"></span>
                        </div>
                    </div>
                    <div class="terminal-body">
                        <div class="generator-content">
                            <p class="terminal-prompt">root@securecheck:~$ generate_secure_password</p>
                            
                            <!-- Generator Controls -->
                            <div class="generator-controls">
                                <div class="control-group">
                                    <label class="control-label">Length: <span id="length-value">16</span></label>
                                    <input type="range" id="password-length" min="8" max="32" value="16" oninput="updateLengthDisplay()">
                                </div>
                                <div class="control-group">
                                    <label class="control-checkbox">
                                        <input type="checkbox" id="include-uppercase" checked>
                                        <span>Uppercase (A-Z)</span>
                                    </label>
                                </div>
                                <div class="control-group">
                                    <label class="control-checkbox">
                                        <input type="checkbox" id="include-lowercase" checked>
                                        <span>Lowercase (a-z)</span>
                                    </label>
                                </div>
                                <div class="control-group">
                                    <label class="control-checkbox">
                                        <input type="checkbox" id="include-numbers" checked>
                                        <span>Numbers (0-9)</span>
                                    </label>
                                </div>
                                <div class="control-group">
                                    <label class="control-checkbox">
                                        <input type="checkbox" id="include-symbols" checked>
                                        <span>Symbols (!@#$%)</span>
                                    </label>
                                </div>
                            </div>
                            
                            <button onclick="generatePassword()" class="scan-btn">
                                <span class="btn-icon">üé≤</span>
                                <span class="btn-text">GENERATE PASSWORD</span>
                            </button>
                            
                            <!-- Generated Password Display -->
                            <div id="generated-password-container" class="generated-password-container" style="display: none;">
                                <div class="generated-password-display">
                                    <span class="generated-label">&gt;&gt; Generated:</span>
                                    <code id="generated-password" class="generated-password"></code>
                                    <button onclick="copyGeneratedPassword()" class="copy-btn" title="Copy to clipboard">
                                        üìã
                                    </button>
                                </div>
                                <div id="generated-strength" class="generated-strength-info"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- History Section -->
                <section class="terminal-window history-section">
                    <div class="terminal-header">
                        <span class="terminal-title">‚îå‚îÄ‚îÄ[SCAN_HISTORY]</span>
                        <button class="clear-history-btn" onclick="clearHistory()">[ CLEAR ]</button>
                    </div>
                    <div class="terminal-body">
                        <div id="history-list" class="history-list">
                            <p class="dim-text">No scan history available. Initiate a scan to begin.</p>
                        </div>
                    </div>
                </section>

                <!-- Stats Section -->
                <section class="terminal-window stats-section">
                    <div class="terminal-header">
                        <span class="terminal-title">‚îå‚îÄ‚îÄ[SYSTEM_STATS]</span>
                    </div>
                    <div class="terminal-body">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üìä</div>
                                <div class="stat-value" id="total-scans">0</div>
                                <div class="stat-label">TOTAL SCANS</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚ö†Ô∏è</div>
                                <div class="stat-value danger" id="pwned-count">0</div>
                                <div class="stat-label">BREACHED</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚úì</div>
                                <div class="stat-value success" id="safe-count">0</div>
                                <div class="stat-label">SECURE</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="footer-content">
                <p class="footer-text">
                    <span class="dim-text">POWERED BY:</span> 
                    <a href="https://haveibeenpwned.com/" target="_blank">HaveIBeenPwned API</a>
                    <span class="separator">|</span>
                    <span class="dim-text">STATUS:</span> 
                    <span class="status-indicator">‚óè ONLINE</span>
                </p>
            </div>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Firebase Configuration (injected from backend) -->
    <script>
        window.FIREBASE_CONFIG = {
            apiKey: "{{ firebase_config.apiKey }}",
            authDomain: "{{ firebase_config.authDomain }}",
            projectId: "{{ firebase_config.projectId }}",
            storageBucket: "{{ firebase_config.storageBucket }}",
            messagingSenderId: "{{ firebase_config.messagingSenderId }}",
            appId: "{{ firebase_config.appId }}",
            databaseURL: "{{ firebase_config.databaseURL }}"
        };
    </script>
    
    <!-- Main App Script -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
